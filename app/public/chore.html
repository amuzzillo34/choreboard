<!DOCTYPE html>

<html>

<head>
    <title>Shared Chore Board</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Bootstrap -->
    <link href="../css/bootstrap.css" rel="stylesheet" type="text/css">
    <link href="../css/bootstrap-theme.css" rel="stylesheet" type="text/css">
    <link href="../css/bootstrap-theme.min.css" rel="stylesheet" type="text/css">
    <link href="../css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="../css/style.css" rel="stylesheet" type="text/css">

</head>

<body class="backgroundColor infoMargin">
    <div class="container">

      <!--***************************
        FIX ROUTING TO GO BACK TO /INDEX NOT /CHORE/INDEX
        *****************************-->
      <div class="header">
        <a href="index">
          <img class="homeBtn" src="img/homeLogo.png">
          Apartment 123
        </a>
      </div>

      <div class="choreContainer">
        <h3>Individual chore page</h3>
      </div>

        <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
        <script src="https://code.jquery.com/jquery.js"></script>
        <!-- Include all compiled plugins (blelow), or include individual files as needed -->
        <script src="../js/bootstrap.min.js"></script>
        <script>
            var urlArr = window.location.href.split('/')
            var jsonID = urlArr[urlArr.length - 1]

            function parseHTMLString(name, date, owner, location, description) {
                var paramsArr = [name, date, owner, location, description, 'Back', 'Complete']
                var stringComponents = ['<p>', '</p>', '<p>', '</p>', '<p>', '</p>', '<p>', '</p>', '<p>', '<p>',
                    '<button class="navBtn"> <a href="../chorelist" style="color: #272932">', '</a> </button>', '<button class="navBtn"> <a href="../chorelist" style="color:#272932">', '</a> </button>'
                ]
                var labelStrings = ['<h5>Chore Name: </h5>', '<h5>Chore Owner: </h5>', '<h5>Date: </h5>', '<h5>Location: </h5>', '<h5>Description: </h5>', '<h5></h5>', '<p></p>']

                var masterStr = ''
                for (var i = 0; i < stringComponents.length; i += 2) {
                    masterStr += labelStrings[i / 2] + stringComponents[i] + paramsArr[i / 2] + stringComponents[i + 1]
                }
                return masterStr
            }

            var xhttp = new XMLHttpRequest();
            xhttp.onreadystatechange = function() {
                if (this.readyState == 4 && this.status == 200) {
                    // Typical action to be performed when the document is ready:
                    var choreObj = JSON.parse(xhttp.responseText)
                    //console.log(choreObj)
                    var htmlStr = parseHTMLString(choreObj.name, choreObj.owner, choreObj.date, choreObj.location, choreObj.description)
                    //console.log(htmlStr)
                    $('.choreContainer').append(htmlStr)

                }
            };
            xhttp.open("POST", "/api/chore/" + jsonID, true);
            xhttp.send();


        </script>

</body>

</html>
